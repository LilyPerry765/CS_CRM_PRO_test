<Local:RequestFormBase x:Class="CRM.Application.Views.VisitPlacesForm"
        xmlns:Local="clr-namespace:CRM.Application.Local"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:cal="http://schemas.microsoft.com/wpf/2008/datepicker" 
        xmlns:uc="clr-namespace:CRM.Application.UserControls"
                       Loaded="RequestFormBase_Loaded"
        Title="بازدید از محل">

    <Grid FlowDirection="RightToLeft">
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>

        <uc:CustomerInfoSummary Grid.Row="0" x:Name="CustomerInfoUC" />
        <uc:RequestInfoSummary Grid.Row="1" x:Name="RequestInfoUC"/>
      

        <GroupBox Grid.Row="4" x:Name="VisitPlacesDetails" Header="جزییات بازدید از محل">
            <Grid >
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
    
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />

                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <Label           Grid.Row="0" Grid.Column="0" Name="PostCodeLabel" Content="کد پستی"  />
                <TextBox         Grid.Row="0" Grid.Column="1"  Name="PostCodeTextbox" Grid.ColumnSpan="3"/>

                <Label           Grid.Row="1" Grid.Column="0" Name="AddressLabel" Content="آدرس"  />
                <TextBox         Grid.Row="1" Grid.Column="1"  Name="AddressTextbox" Grid.ColumnSpan="3"/>

                <Label           Grid.Row="2" Grid.Column="0" Name="VisitDateLabel" Content="تاریخ بازدید"  />
                <cal:DatePicker  Grid.Row="2" Grid.Column="1" Name="VisitDatePicker" SelectedDate="{Binding VisitDate}"  />

                <Label           Grid.Row="2" Grid.Column="2" Name="VisitHourLabel" Content="ساعت بازدید"  />
                <TextBox         Grid.Row="2" Grid.Column="3"  Name="VisitHourTextbox" Text="{Binding VisitHour}" />

                <Label           Grid.Row="3" Grid.Column="0" Name="AirCableMeterLabel" Content="متراژ سیم هوایی"  />
                <TextBox         Grid.Row="3" Grid.Column="1"  Name="AirCableMeterTextbox" Text="{Binding AirCableMeter}" />

                <Label           Grid.Row="3" Grid.Column="2"  Content="تاریخ بازدید قبلی"  />
                <ComboBox        Grid.Row="3" Grid.Column="3" x:Name="VisitDateComboBox" SelectedValuePath="ID" DisplayMemberPath="Name" SelectedValue="{Binding RelatedVisitID}"/>

                <Label           Grid.Row="4" Grid.Column="0" Name="CableMeterLabel" Content="متراژ سیم"  />
                <TextBox         Grid.Row="4" Grid.Column="1"  Name="CableMeterTextbox" Text="{Binding CableMeter}" />

                <Label           Grid.Row="5" Grid.Column="0"   Name="CommentStatusLabel" Content="توضیحات"  />
                <TextBox         Grid.Row="5" Grid.Column="1"  Grid.ColumnSpan="3"  Name="CommentStatustextBox"  Text="{Binding CommentStatus}" />

                <Label           Grid.Row="6" Grid.Column="0"   Name="OutBoundLabel" Content="خارج از مرز"  />
                <CheckBox        Grid.Row="6" Grid.Column="1"    Name="OutBoundCheckBox" IsThreeState="False" IsChecked="{Binding IsOutBound}" Checked="OutBoundCheckBox_Checked" Unchecked="OutBoundCheckBox_Unchecked" VerticalAlignment="Center"/>

                <Label           Grid.Row="6" Grid.Column="2"  Name="OutBoundMeterLabel" Content="متراژ خارج از مرز" Visibility="Collapsed"  />
                <TextBox         Grid.Row="6" Grid.Column="3"   Name="OutBoundMetertextBox" Text="{Binding OutBoundMeter}"  Visibility="Collapsed" />

                <Label           Grid.Row="7" Grid.Column="0"  Name="OutBoundEstablishDateLabel" Content="تاریخ برقراری خارج مرز"  Visibility="Collapsed" />
                <cal:DatePicker  Grid.Row="7" Grid.Column="1"  Name="OutBoundEstablishDatePicker" SelectedDate="{Binding OutBoundEstablishDate}"  Visibility="Collapsed" />

                <Label           Grid.Row="7" Grid.Column="2"   Name="SixMeterMastsLabel" Content="تیر شش متری" Visibility="Collapsed"  />
                <TextBox         Grid.Row="7" Grid.Column="3"   Name="SixMeterMastsTextBox" Text="{Binding SixMeterMasts}"  Visibility="Collapsed" />

                <Label           Grid.Row="8" Grid.Column="0"   Name="EightMeterMastsLabel" Content="تیر هشت متری" Visibility="Collapsed"  />
                <TextBox         Grid.Row="8" Grid.Column="1"   Name="EightMeterMastsTextBox" Text="{Binding EightMeterMasts}"  Visibility="Collapsed" />

                <Label           Grid.Row="8" Grid.Column="2"   Name="ThroughWidthLabel" Content="عرض عبوری" Visibility="Collapsed"  />
                <TextBox         Grid.Row="8" Grid.Column="3"   Name="ThroughWidthTextBox" Text="{Binding ThroughWidth}"  Visibility="Collapsed" />

                <Label           Grid.Row="9" Grid.Column="0"   Name="CrossCabinetLabel" Content="کافو عبوری" Visibility="Collapsed" Height="30"  />
                <ComboBox        Grid.Row="9" Grid.Column="1"   Name="CrossCabinetComboBox" DisplayMemberPath="Name" SelectedValuePath="ID" Visibility="Collapsed" Height="30" SelectionChanged="CrossCabinetComboBox_SelectionChanged" />

                <Label           Grid.Row="9" Grid.Column="2"   Name="CrossPostMeterLabel" Content="پست عبوری" Visibility="Collapsed"  Height="30" />
                <ComboBox        Grid.Row="9" Grid.Column="3"   Name="CrossPostComboBox" DisplayMemberPath="Name" SelectedValuePath="ID" SelectedValue="{Binding CrossPostID}"  Visibility="Collapsed" Height="30"  />

                <Label           Grid.Row="10" Grid.Column="0"   Name="StatusLabel" Content="وضعیت" Height="30"  />
                <ComboBox        Grid.Row="10" Grid.Column="1"   Name="StatusComboBox"  DisplayMemberPath="StatusResult" SelectedValuePath="StepStatusID" SelectionChanged="StatusComboBox_SelectionChanged" Height="30" />

                <!--<Button Name="saveButton" Content="ذخیره"  Click="saveButton_Click" IsDefault="True" Grid.Row="5" Grid.Column="3" Width="90" Tag="Footer" HorizontalAlignment="Right"/>-->

            </Grid >
        </GroupBox>

        <GroupBox Grid.Row="5" Header="پست" >
            <DataGrid x:Name="ItemsDataGrid"
                      BorderThickness="0 1 0 0"
                      AutoGenerateColumns="False"
                      CanUserAddRows="True"
                      CanUserResizeColumns="True"
                      CanUserResizeRows="False"
                      CanUserDeleteRows="False"
                      SelectionMode="Single"
                      SelectionUnit="FullRow"
                      ItemsSource="{Binding}"
                      RowEditEnding="ItemsDataGrid_RowEditEnding"
                      Grid.ColumnSpan="8"  Grid.RowSpan="2">
                <DataGrid.ContextMenu>
                    <ContextMenu FontFamily="Tahoma">
                        <MenuItem Header="حذف" Click="DeleteItem">
                            <MenuItem.Icon>
                                <Image Source="/CRM.Application;component/Images/delete2_16x16.png" Width="16" Height="16" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </DataGrid.ContextMenu>
                <DataGrid.Columns>
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Image Source="/CRM.Application;component/Images/element_16x16.png" Width="16" Height="16" HorizontalAlignment="Center" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Width="*" Header="کافو">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock x:Name="CabinetTextBlock"   Text="{Binding Path=CabinetNumber, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox x:Name="CabinetComboBox"  ItemsSource="{Binding _Cabinets,  RelativeSource={RelativeSource AncestorType=Window}}"  SelectedValue="{Binding Path=CabinetID, UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="Name" SelectedValuePath="ID" SelectionChanged="CabinetComboBox_SelectionChanged" Loaded="CabinetComboBox_Loaded"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Width="*" Header="پست" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock x:Name="PostTextBlock"   Text="{Binding Path=PostNumber, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox x:Name="PostComboBox"  ItemsSource="{Binding _Posts, RelativeSource={RelativeSource AncestorType=Window}}"  SelectedValue="{Binding Path=PostID, UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="Name" SelectedValuePath="ID" SelectionChanged="PostComboBox_SelectionChanged" Loaded="PostComboBox_Loaded"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>

                    <!--<DataGridComboBoxColumn Header="کافو" Width="*" x:Name="CabinetColumn" DisplayMemberPath="Name" SelectedValuePath="ID" SelectedValueBinding="{Binding Path=CabinetID}" sel/>
                    <DataGridComboBoxColumn Header="پست" Width="*" x:Name="PostColumn" DisplayMemberPath="Name" SelectedValuePath="ID" SelectedValueBinding="{Binding Path=PostID}"/>-->
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>



    </Grid>

</Local:RequestFormBase>
