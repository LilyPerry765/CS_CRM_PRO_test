<Local:RequestFormBase xmlns:Local="clr-namespace:CRM.Application.Local" 
                   x:Class="CRM.Application.Views.ChooseNoForm" 
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
                   Title="تعیین شماره" 
                   xmlns:cal="http://schemas.microsoft.com/wpf/2008/datepicker" 
                   xmlns:converter="clr-namespace:CRM.Converters" 
                   xmlns:uc="clr-namespace:CRM.Application.UserControls" 
                   WindowStartupLocation="CenterScreen" 
                   Loaded="Window_Loaded">

    <ScrollViewer  Padding="0 0 10 0" FlowDirection="RightToLeft">
        <Grid>
            <Grid.Resources>
                <ResourceDictionary Source="/CRM.Application;Component/Resources/Styles/AutoComplete.Styles.xaml" />
            </Grid.Resources>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition  Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <!--<RowDefinition  Height="Auto"/>-->
                <RowDefinition  Height="Auto"/>
                <RowDefinition  Height="*"/>
            </Grid.RowDefinitions>

            <!--<uc:UserInfoSummary Grid.Row="0" x:Name="UserInfoUC"/>-->

            <uc:InstallInfoSummary Grid.Row="1" x:Name="InstallInfoUC" />

            <Expander Grid.Row="2" x:Name="InvestigateInfoUC" Header="امکانات فنی"/>

            <Expander Header="مشخصات سوییچ" Grid.Row="3">
                <Grid Name="SwitchInfo" >
                    <Grid.RowDefinitions>
                        <RowDefinition  Height="30" />
                        <RowDefinition  Height="30" />
                        <RowDefinition  Height="30" />
                        <RowDefinition  Height="30" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Text="از شماره:" Grid.Row="0" Grid.Column="0" />
                    <TextBox Text="{Binding Path=SwitchPrecode.FromNumber}" Grid.Row="0" Grid.Column="1" x:Name="StartNoTextBox" />

                    <TextBlock Text="تا شماره:" Grid.Row="0" Grid.Column="2"/>
                    <TextBox Text="{Binding Path=SwitchPrecode.ToNumber}" Grid.Row="0" Grid.Column="3" x:Name="EndNoTextBox" />

                    <TextBlock Text="مشخصه اونو:" Grid.Row="1" Grid.Column="0"/>
                    <TextBox Text="{Binding Path=Switch.FeatureONU}" Grid.Row="1" Grid.Column="1" x:Name="FeatureONUTextBox" />

                    <TextBlock Text="ظرفیت:" Grid.Row="1" Grid.Column="2"  />
                    <TextBox Text="{Binding Path=Switch.Capacity}" Grid.Row="1" Grid.Column="3" x:Name="CapacityTextBox"/>

                    <TextBlock Text="ظرفیت قابل بهره برداری:" Grid.Row="2"  Grid.Column="0" />
                    <TextBox  Text="{Binding Path=Switch.OperationalCapacity}" Grid.Row="2" Grid.Column="1" x:Name="OperationalCapacityTextBox" />

                    <TextBlock Text="ظرفیت منصوبه:" Grid.Row="2" Grid.Column="2"  />
                    <TextBox  Text="{Binding Path=Switch.InstallCapacity}" Grid.Row="2" Grid.Column="3" x:Name="InstallCapacityTextBox" />

                    <TextBlock Text="ظرفیت سرویس ویژه:" Grid.Row="3" Grid.Column="0"  />
                    <TextBox Text="{Binding Path=SwitchPrecode.SpecialServiceCapacity}" Grid.Row="3" Grid.Column="1" x:Name="SpecialServiceCapacityTextBox" />
                </Grid>

            </Expander>

            <uc:CustomerInfoSummary Grid.Row="4" x:Name="CustomerInfoUC"/>

            <uc:RequestInfoSummary Grid.Row="5" x:Name="RequestInfoUC"/>

            <GroupBox Grid.Row="6" Name="ChooseNoDetail" Visibility="Collapsed">
            </GroupBox>

            <GroupBox Grid.Row="7" x:Name="BuchtInfo" Header="مشخصات بوخت" DockPanel.Dock="Top" Visibility="Collapsed">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                    </Grid.ColumnDefinitions>
                    
                    <Label Content="تلفن قدیم" Grid.Row="0" Grid.Column="0"/>
                    <TextBox x:Name="OldTelephonNoBuchtTextBox" Grid.Row="0" Grid.Column="1"/>

                    <Label Content="بوخت پر" Grid.Row="0" Grid.Column="3"/>
                    <TextBox x:Name="BuchtTextTextBox" Grid.Row="0" Grid.Column="4"/>

                    <Label Content="بوخت رزرو" Grid.Row="0" Grid.Column="6"/>
                    <TextBox x:Name="reservBuchtTextBox" Grid.Row="0" Grid.Column="7"/>
                    
                </Grid>
            </GroupBox>

            <GroupBox Grid.Row="8"  Header="انتخاب سوییچ"  Name="switchDetail" DockPanel.Dock="Top">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <Label Content="پیش شماره های اونو:"  Grid.Row="0" Grid.Column="0"   Height="30"/>
                    <TextBox  Grid.Column="1" Grid.Row="0"   x:Name="ProposalNoTextBox" IsReadOnly="True" Grid.ColumnSpan="4" Height="30"/>

                    <Label Content="نوع پیش شماره:"  Grid.Row="1" Grid.Column="0"   Height="30"/>
                    <ComboBox  Grid.Column="1" Grid.Row="1"  DisplayMemberPath="Name" SelectedValuePath="ID"  x:Name="PreCodeTypeComboBox"   SelectionChanged="PreCodeTypeComboBox_SelectionChanged" Height="30"/>

                    <Label Grid.Row="1" Grid.Column="2"  Content="پیش شماره" Height="30"/>
                    <ComboBox Grid.Row="1" Grid.Column="3" x:Name="SwitchPreCodeComboBox" DisplayMemberPath="SwitchPreNo"  SelectedValuePath="ID"  IsEditable="True"  SelectionChanged="SwitchPreCodeComboBox_SelectionChanged" Height="30"/>

                    <!--<uc:AutoComplete Grid.Row="1" Grid.Column="3" x:Name="SwitchCodeComboBox" SelectedValuePath="ID"  
                          PatternChanged="SwitchCodeComboBox_PatternChanged" Style="{StaticResource AutoCompleteComboBox}"  
                          SelectionChanged="SwitchCodeComboBox_SelectionChanged"
                          Delay="500" >
                            <uc:AutoComplete.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" FlowDirection="RightToLeft">
                                        <TextBlock  Text="{Binding ID}"   Width="50" />
                                        <TextBlock  Text="{Binding SwitchPreNo}"  Width="100" />
                                        <TextBlock  Text="{Binding PreCodeType}"   Width="Auto" />

  

                                </StackPanel>
                                
                            </DataTemplate>
                            </uc:AutoComplete.ItemTemplate>
                        </uc:AutoComplete> -->

                </Grid>
            </GroupBox>

            <GroupBox Header="مشخصات تعیین شماره"  Grid.Row="9" >
                <Grid Name="ChooseTelInfo">
                    <Grid.RowDefinitions>
                        <RowDefinition  Height="30" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition  />
                        <ColumnDefinition />
                        <ColumnDefinition  />
                        <ColumnDefinition  />
                    </Grid.ColumnDefinitions>

                    <Label Grid.Row="0" Grid.Column="0" Content="شماره تلفن" />
                    <ComboBox Grid.Column="1" Grid.Row="0" x:Name="TelephoneNoComboBox" DisplayMemberPath="TelephoneNo" SelectedValuePath="TelephoneNo" IsEditable="True" SelectionChanged="TelephoneNoComboBox_SelectionChanged"/>

                    <!--<uc:AutoComplete Grid.Column="1" Grid.Row="0" x:Name="TelephoneNoComboBox" SelectedValuePath="TelephoneNo"  SelectionChanged="TelephoneNoComboBox_SelectionChanged"
                          PatternChanged="TelephoneNoComboBox_PatternChanged" Style="{StaticResource AutoCompleteComboBox}" 
                          Delay="500" >
                            <uc:AutoComplete.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" FlowDirection="RightToLeft">
                                        <TextBlock  Text="{Binding TelephoneNo}"   Width="Auto" />
                                    </StackPanel>
                                </DataTemplate>
                            </uc:AutoComplete.ItemTemplate>
                        </uc:AutoComplete>-->


                    <Label Grid.Row="0" Grid.Column="2" Content="شماره پورت" />
                    <ComboBox Grid.Column="3" Grid.Row="0"  x:Name="PortComboBox" IsEditable="True" DisplayMemberPath="PortNo" SelectedValuePath="ID" />

                    <!--<uc:AutoComplete Grid.Column="3" Grid.Row="0" x:Name="PortNoComboBox" SelectedValuePath="ID" 
                          PatternChanged="PortNoComboBox_PatternChanged" Style="{StaticResource AutoCompleteComboBox}" 
                          Delay="500" >
                            <uc:AutoComplete.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" FlowDirection="RightToLeft">
                                      <TextBlock  Text="{Binding ID}"   Width="50" />
                                        <TextBlock  Text="{Binding SwitchID}"   Width="Auto"  />
                                        <TextBlock  Text="{Binding PortNo}"   Width="100" />
                                    </StackPanel>
                                    
                                </DataTemplate>
                            </uc:AutoComplete.ItemTemplate>
                    </uc:AutoComplete>-->
                    <!--<Label Grid.Row="0" Grid.Column="2" Content="تاریخ تعیین شماره" Visibility="Collapsed" />
                        <cal:DatePicker Grid.Row="0" Grid.Column="3" Name="TelAssignDate" SelectedDate="{Binding RequestDate}"  Visibility="Collapsed"/>-->
                </Grid>
            </GroupBox>

            <Grid  Grid.Row="10" Name="ChooseStatus" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                
                <Label     Grid.Row="0" Grid.Column="0" Content="وضعیت"  Name="StatusLabel"/>
                <ComboBox  Grid.Row="0" Grid.Column="1" Name="InvestigateStatusComboBox" DisplayMemberPath="StatusResult" SelectedValuePath="StepStatusID" />

                <Label   Grid.Row="0" Grid.Column="2"  x:Name="GSMCodeLabel" Content="سریال"  Visibility="Collapsed"/>
                <TextBox Grid.Row="0" Grid.Column="3"  x:Name="GSMCodeTextBox" Visibility="Collapsed"/>
            </Grid>

            <GroupBox Grid.Row="11" DockPanel.Dock="Bottom" Header="لیست شماره تلفن ها" x:Name="TelItemsGroupBox" VerticalAlignment="Bottom">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <DataGrid Grid.Row="0"   x:Name="TelItemsDataGrid" 
                          BorderThickness="0 1 0 0"  
                          AutoGenerateColumns="False"                          
                          CanUserResizeColumns="True"
                          CanUserResizeRows="False"
                          CanUserDeleteRows="False"
                          SelectionMode="Single"
                          SelectionUnit="FullRow" 
                          SelectionChanged="TelItemsDataGrid_SelectionChanged"
                          ItemsSource="{Binding}">
                        <DataGrid.Columns>
                            <DataGridTemplateColumn>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Image Source="/CRM.Application;component/Images/element_16x16.png" Width="16" Height="16" HorizontalAlignment="Center" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn Width="2*" Header="شماره تلفن"  Binding="{Binding Path=TelephoneNo, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True" />
                            <!--<DataGridComboBoxColumn x:Name="SwitchPortsColumn" SelectedValueBinding="{Binding Path=SwitchPortID, UpdateSourceTrigger=PropertyChanged}" Header="پورت سوئیچ" SelectedValuePath="Value" DisplayMemberPath="Name" />-->
                            <DataGridCheckBoxColumn Width="*" Header="شماره خاص" Binding="{Binding IsVIP}" >
                                <DataGridCheckBoxColumn.ElementStyle>
                                    <Style TargetType="CheckBox">
                                        <Setter Property="HorizontalAlignment" Value="Left"/>
                                    </Style>
                                </DataGridCheckBoxColumn.ElementStyle>
                            </DataGridCheckBoxColumn>
                            <DataGridCheckBoxColumn Width="*" Header="شماره رند" Binding="{Binding IsRound}">
                                <DataGridCheckBoxColumn.ElementStyle>
                                    <Style TargetType="CheckBox">
                                        <Setter Property="HorizontalAlignment" Value="Left"/>
                                    </Style>
                                </DataGridCheckBoxColumn.ElementStyle>
                            </DataGridCheckBoxColumn>
                            <DataGridTextColumn Width="*" Header="تاریخ تخلیه" Binding="{Binding DischargeDate}"/>
                            <DataGridTextColumn Width="*" Header="مشترک قبلی" Binding="{Binding Customer}"/>
                            <DataGridTextColumn Width="*" Binding="{Binding Status}" Header="وضعیت" />
                        </DataGrid.Columns>
                    </DataGrid>

                    <StackPanel Grid.Row="1">
                        <Border   FlowDirection="RightToLeft" BorderThickness="0 1 0 0" BorderBrush="#d5d5d5" Background="#e9f3fe" Margin="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="546*" />
                                    <ColumnDefinition Width="60*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <uc:Pager x:Name="Pager" DockPanel.Dock="Bottom" PageSize="10" PageChanged="Pager_PageChanged" HorizontalAlignment="Left" />
                            </Grid>
                        </Border>
                    </StackPanel>

                </Grid>
            </GroupBox>

        </Grid>
    </ScrollViewer>
</Local:RequestFormBase>