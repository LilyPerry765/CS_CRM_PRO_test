<Local:RequestFormBase x:Class="CRM.Application.Views.SaleFactorForm"
                   Title="فاکتور فروش" 
                   xmlns:UserControls="clr-namespace:CRM.Application.UserControls"
                   xmlns:Local="clr-namespace:CRM.Application.Local"
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
                   xmlns:sys="clr-namespace:System.Configuration.Assemblies;assembly=mscorlib" 
                   xmlns:cal="http://schemas.microsoft.com/wpf/2008/datepicker" 
                   xmlns:uc="clr-namespace:CRM.Application.UserControls" 
                   mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" d:DesignWidth="780"
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"  
                   Loaded="PopupWindow_Loaded" Icon="/CRM.Application;component/Images/City48x48.png" Width="800" Height="auto">
    <Grid FlowDirection="RightToLeft" >
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="150" />
        </Grid.ColumnDefinitions>

        <GroupBox Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Name="PropertiesGroupBox" Header="مشخصات" >
            <Grid x:Name="PropertiesInfo" Height="auto">
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <!--<RowDefinition Height="30" />-->
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="180" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Label Grid.Row="0" Grid.Column="0" Content="شناسه قبض : " Visibility="Collapsed"/>
                <TextBox Grid.Row="0" Grid.Column="1" Name="BillIDTextBox" IsReadOnly="True" Style="{StaticResource ResourceKey=NumericTextBox}" Visibility="Collapsed"/>

                <Label Grid.Row="0" Grid.Column="2" Content="شناسه پرداخت : " Visibility="Collapsed"/>
                <TextBox Grid.Row="0" Grid.Column="3" Name="PaymentIDTextBox" IsReadOnly="True" Style="{StaticResource ResourceKey=NumericTextBox}" Visibility="Collapsed"/>
                
                <Label Grid.Row="0" Grid.Column="0" Content="نام درخواست : " />
                <TextBox Grid.Row="0" Grid.Column="1" Name="RequestTypeTextBox" IsReadOnly="True"/>

                <Label Grid.Row="0" Grid.Column="2" Content="شماره درخواست : " />
                <TextBox Grid.Row="0" Grid.Column="3" Name="RequestIDTextBox" IsReadOnly="True" Style="{StaticResource ResourceKey=NumericTextBox}"/>

                <Label Grid.Row="1" Grid.Column="0" Content="تاریخ درخواست : " />
                <TextBox Grid.Row="1" Grid.Column="1" Name="InsertDateTextBox" IsReadOnly="True" Style="{StaticResource ResourceKey=NumericTextBox}"/>

                <Label Grid.Row="1" Grid.Column="2"  Name="PrintDateLabel" Content="تاریخ صدور فاکتور : " />
                <TextBox Grid.Row="1" Grid.Column="3" Name="PrintDateTextBox" IsReadOnly="True" Style="{StaticResource ResourceKey=NumericTextBox}"/>

                <Label Grid.Row="2" Grid.Column="0" Content="نام مشترک : " />
                <TextBox Grid.Row="2" Grid.Column="1" Name="CustomerNameTextBox" IsReadOnly="True" />

                <Label Grid.Row="2" Grid.Column="2"  Content="شماره تلفن : " />
                <TextBox Grid.Row="2" Grid.Column="3" Name="TelephoneNoTextBox" IsReadOnly="True" Style="{StaticResource ResourceKey=NumericTextBox}"/>

                <Label Grid.Row="3" Grid.Column="0"  Content="نام مرکز : " />
                <TextBox Grid.Row="3" Grid.Column="1" Name="CenterTextBox" IsReadOnly="True"/>

                <Label   Grid.Row="3" Grid.Column="2"  Content="شماره فاکتور : "  x:Name="FactorNumberLabel" Visibility="Collapsed"/>
                <TextBox Grid.Row="3" Grid.Column="3"  IsReadOnly="True"            x:Name="FactorNumberTextBox" Visibility="Collapsed"/>

            </Grid>
        </GroupBox>

        <GroupBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" Name="PaymentGroupBox" Header="پرداخت ها">

            <DataGrid DockPanel.Dock="Bottom" x:Name="ItemsDataGrid" Height="250"
                        BorderThickness="0 1 0 0"
                      AutoGenerateColumns="False"
                      CanUserAddRows="True"
                      CanUserResizeColumns="True"
                      CanUserResizeRows="False"
                      CanUserDeleteRows="False"
                      SelectionMode="Single"
                      SelectionUnit="FullRow"
                      ItemsSource="{Binding}"                                
                      IsReadOnly="True">
                <DataGrid.Columns>
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Image Source="/CRM.Application;component/Images/element_16x16.png" Width="16" Height="16" HorizontalAlignment="Center" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridComboBoxColumn Header=" عنوان " x:Name="CostTitleColumn" SelectedValueBinding="{Binding Path=BaseCostID, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="ID" DisplayMemberPath="Name" IsReadOnly="True" Width="2*"/>
                    <DataGridComboBoxColumn Header=" نحوه پرداخت " IsReadOnly="True" SelectedValueBinding="{Binding Path=PaymentType, UpdateSourceTrigger=PropertyChanged}"  x:Name="PaymentTypeColumn" DisplayMemberPath="Name" SelectedValuePath="ID" Width="*"/>
                    <DataGridTextColumn Header=" مبلغ " IsReadOnly="True" Binding="{Binding Path=Cost, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                    <DataGridTextColumn Header=" آبونمان " IsReadOnly="True" Binding="{Binding Path=Abonman, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                    <DataGridTextColumn Header=" مالیات " IsReadOnly="True" Binding="{Binding Path=Tax, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                    <DataGridTextColumn Header=" جمع " IsReadOnly="True" Binding="{Binding Path=AmountSum, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>

        <Label Grid.Row="2" Grid.Column="1" Content="جمع پرداخت ها : " />
        <TextBox Grid.Row="2" Grid.Column="2" Name="CostSumTextBox" IsReadOnly="True" Style="{StaticResource ResourceKey=NumericTextBox}"/>

    </Grid>
</Local:RequestFormBase>
