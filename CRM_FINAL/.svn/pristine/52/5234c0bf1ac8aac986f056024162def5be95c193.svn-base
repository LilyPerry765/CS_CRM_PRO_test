<Local:PopupWindow xmlns:Local="clr-namespace:CRM.Application.Local" 
                   x:Class="CRM.Application.Views.CustomerForm"
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
                   xmlns:sys="clr-namespace:System.Configuration.Assemblies;assembly=mscorlib" 
                   Title="مشترکین" 
                   xmlns:cal="http://schemas.microsoft.com/wpf/2008/datepicker" 
                   xmlns:uc="clr-namespace:CRM.Application.UserControls" 
                   xmlns:sv="clr-namespace:CRM.Application.StaticValidation"
                   Loaded="Window_Loaded" 
                   mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                   d:DesignHeight="350" d:DesignWidth="780">
    <Grid FlowDirection="RightToLeft">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="*"/>

        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />

        </Grid.RowDefinitions>
        <Label Content="نوع شخص" Grid.Row="0" Grid.Column="0"/>
        <ListBox Grid.Row="0" Grid.Column="1" SelectedValue="{Binding Path=PersonType}" SelectedValuePath="Tag" x:Name="PersonTypeListBox" SelectionChanged="PersonTypeListBox_SelectionChanged">
            <ListBoxItem Tag="0" Name="PersonRadioButton" IsSelected="True">حقیقی</ListBoxItem>
            <ListBoxItem Tag="1" Name="CompanyRadioButton">حقوقی</ListBoxItem>
        </ListBox>

        <Grid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="4" Name="PersonGrid" Visibility="{Binding IsSelected, ElementName=CompanyRadioButton, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
            </Grid.RowDefinitions>

            <Label Grid.Row="0" Grid.Column="0" Content="کد ملی" />
            <TextBox Grid.Row="0" Grid.Column="1" Name="NationalCodeTextBox" Text="{Binding NationalCodeOrRecordNo}">
                <!--<TextBox.Text>
                            <Binding  Path="NationalCodeOrRecordNo" UpdateSourceTrigger="LostFocus" ValidatesOnDataErrors="True">
                                <Binding.ValidationRules>
                                    <sv:StaticValidation ValidationType="NationalCode" >
                                        <sv:StaticValidation.PersonTypeClassProperty>
                                            <sv:PersonTypeClass  PersonType="{Binding  SelectedValue ,ElementName=PersonTypeListBox}" />
                                        </sv:StaticValidation.PersonTypeClassProperty>
                                    </sv:StaticValidation>
                                </Binding.ValidationRules>
                            </Binding> 
                        </TextBox.Text>-->
            </TextBox>

            <Label Content="جنسیت" Grid.Row="0" Grid.Column="2" />
            <ListBox x:Name="GendersListBox" Grid.Row="0" Grid.Column="3" SelectedValue="{Binding Path=Gender,TargetNullValue=null}" SelectedValuePath="Tag" >
                <ListBoxItem Tag="0" >مرد</ListBoxItem>
                <ListBoxItem Tag="1" >زن</ListBoxItem>
            </ListBox>

            <Label Grid.Row="1" Grid.Column="0" Content="نام " />
            <TextBox Grid.Row="1" Grid.Column="1" Name="FirstNameTextBox">
                <TextBox.Text>
                    <Binding  Path="FirstNameOrTitle" UpdateSourceTrigger="PropertyChanged"  ValidatesOnDataErrors="True">
                        <Binding.ValidationRules>
                            <sv:StaticValidation ValidationType="NotNull"/>
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>

            <Label  Grid.Row="1" Grid.Column="2" Content="نام خانوادگی" />
            <TextBox Grid.Row="1" Grid.Column="3" Name="LastNameTextBox" Text="{Binding LastName}" />

            <Label Grid.Row="2" Grid.Column="0" Content="نام پدر" />
            <TextBox Grid.Row="2" Grid.Column="1" Name="FatherNameTextBox"  Text="{Binding FatherName}" />

            <Label Grid.Row="2" Grid.Column="2" Content="شماره شناسنامه" />
            <TextBox Grid.Row="2" Grid.Column="3" Name="BirthCertificateIDTextBox"  Text="{Binding BirthCertificateID}" Style="{StaticResource ResourceKey=NumericTextBox}" />

            <Label Grid.Row="3" Grid.Column="0" Content="محل صدور" />
            <TextBox Grid.Row="3" Grid.Column="1" Name="IssuePlaceTextBox"  Text="{Binding IssuePlace}" />

            <Label Grid.Row="3" Grid.Column="2" Content="تاریخ تولد"  />
            <cal:DatePicker Grid.Row="3" Grid.Column="3" Name="BirthDate"  SelectedDate="{Binding BirthDateOrRecordDate}" />

            <Label Grid.Row="4" Grid.Column="0" Content="تلفن تماس" />
            <TextBox Grid.Row="4" Grid.Column="1" Name="UrgentTelNoTextBox" Text="{Binding UrgentTelNo}" Style="{StaticResource ResourceKey=NumericTextBox}" />

            <Label Grid.Row="4" Grid.Column="2" Content="تلفن همراه" />
            <TextBox Grid.Row="4" Grid.Column="3" Name="MobileNoTextBox"  Text="{Binding MobileNo}" Style="{StaticResource ResourceKey=NumericTextBox}" />

            <Label Grid.Row="5" Grid.Column="0" Content="ایمیل" />
            <TextBox Grid.Row="5" Grid.Column="1" Name="EmailTextBox"  Text="{Binding Email}" />

            <Label Grid.Row="5" Grid.Column="2" Content="شناسه مشترک" />
            <Grid Grid.Row="5" Grid.Column="3" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0"  Text="{Binding CustomerID}" Name="PersonCreateCustomerIDTextBox" IsEnabled="False"/>
                <Button Grid.Column="1" Content="ایجاد" Name="PersonCreateCustomerIDButton" Click="PersonCreateCustomerIDButton_Click_1" IsEnabled="False"/>

            </Grid>

        </Grid>

        <Grid Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4" Name="CompanyGrid" Visibility="{Binding IsSelected,ElementName=PersonRadioButton, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="*"/>

            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Label Grid.Row="0" Grid.Column="0" Content="نام " />
            <TextBox Grid.Row="0" Grid.Column="1" Name="TitleTextBox">
                <TextBox.Text>
                    <Binding  Path="FirstNameOrTitle" UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True">
                        <Binding.ValidationRules>
                            <sv:StaticValidation ValidationType="NotNull"/>
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>

            <Label Grid.Row="0" Grid.Column="2" Content="شناسه ملی " />
            <TextBox Grid.Row="0" Grid.Column="3" Name="NationalIDTextBox" Text="{Binding NationalID}" />

            <Label Grid.Row="1" Grid.Column="0" Content="نوع شرکت "/>
            <ComboBox x:Name="CompanyTypesComboBox" Grid.Row="1" Grid.Column="1" DisplayMemberPath="Name" SelectedValuePath="ID" SelectedValue="{Binding CompanyType}" Height="30"/>
            
            <Label Grid.Row="1" Grid.Column="2" Content="شماره ثبت" />
            <TextBox Grid.Row="1" Grid.Column="3" Name="RecordNoTextBox">
                <TextBox.Text>
                    <Binding  Path="NationalCodeOrRecordNo"  UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True">
                        <Binding.ValidationRules>
                            <sv:StaticValidation ValidationType="NotNull"/>
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>

            <Label Grid.Row="2" Grid.Column="0" Content="تاریخ ثبت"  />
            <cal:DatePicker Grid.Row="2" Grid.Column="1" Name="RecordDate"  SelectedDate="{Binding BirthDateOrRecordDate}" />

            <Label Grid.Row="2" Grid.Column="2" Content="تلفن تماس" />
            <TextBox Grid.Row="2" Grid.Column="3" Text="{Binding UrgentTelNo}" Style="{StaticResource ResourceKey=NumericTextBox}" />

            <Label Grid.Row="3" Grid.Column="0" Content="تلفن همراه" />
            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding MobileNo}" Style="{StaticResource ResourceKey=NumericTextBox}" />

            <Label Grid.Row="3" Grid.Column="2" Content="نمابر" />
            <TextBox Grid.Row="3" Grid.Column="3" Text="{Binding Fax}" Style="{StaticResource ResourceKey=NumericTextBox}" />

            <Label Grid.Row="4" Grid.Column="0" Content="ایمیل" />
            <TextBox Grid.Row="4" Grid.Column="1"  Text="{Binding Email}" />

            <Label Grid.Row="4" Grid.Column="2" Content="نمایندگی" />
            <TextBox Grid.Row="4" Grid.Column="3"  Text="{Binding Agency}" />

            <Label Grid.Row="5" Grid.Column="0" Content="شماره نمایندگی" />
            <TextBox Grid.Row="5" Grid.Column="1"  Text="{Binding AgencyNumber}" />

            <Label Grid.Row="5" Grid.Column="2" Content="شناسه مشترک" />
            <Grid Grid.Row="5" Grid.Column="3" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0" Text="{Binding CustomerID}"  Name="CompanyCreateCustomerIDTextBox" IsEnabled="False"/>
                <Button Grid.Column="1"  Content="ایجاد"             Name="CompanyCreateCustomerIDButton"  Click="PersonCreateCustomerIDButton_Click_1" IsEnabled="False"/>

            </Grid>

            <GroupBox  x:Name="AddressInfoGroupBox" Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="4" Header="مشخصات آدرس">

                <Grid x:Name="AddressInfoGrid">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="3*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Label Grid.Row="0" Grid.Column="0" Content="کد پستی : "/>
                    <TextBox Grid.Row="0" Grid.Column="1" Name="PostalCodeTextBox" Text="{Binding PostalCode}"/>

                    <Button Grid.Row="0" Grid.Column="2" Click="SearchAddress_Click" Content="جستجو"/>

                    <Label Grid.Row="0" Grid.Column="3" Content="آدرس : "/>
                    <TextBox Grid.Row="0" Grid.Column="4"  Name="AddressTextBox" IsReadOnly="True" Text="{Binding AddressContent}"/>

                    <Button Grid.Row="0" Grid.Column="5" x:Name="AddressButton" Click="EditAddressButton_Click" Content="ویرایش" />

                </Grid>
            </GroupBox>

            <Button Content="ذخیره" Grid.Row="7" Name="SaveButton" Click="SaveForm" Tag="Footer" />

        </Grid>

    </Grid>
</Local:PopupWindow>